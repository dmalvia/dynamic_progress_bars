function getBarsData(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText),t=e.buttons,a=e.bars,r=e.limit;dynamicBarsData(t,a,r)}else console.log("No Data")},e.open("GET","http://pb-api.herokuapp.com/bars",!0),e.send()}function dynamicBarsData(e,t,a){console.log(a);var r=document.createElement("Select"),n=document.getElementById("selectbar"),l=document.getElementById("appendBars");for(n.appendChild(r),r.setAttribute("id","selectbr"),i=0;i<t.length;i++){var s=document.createElement("div"),d=document.createElement("div"),o=document.createElement("div"),c=t[i]/a*100,u=decimalVal(c),p=document.createElement("option");d.setAttribute("id","progress"+i),s.setAttribute("id","progressbar-"+i),s.setAttribute("class","bars"),o.setAttribute("class","percentLabel"),o.setAttribute("id","percentLabel"+i);var m=document.createTextNode(u+"%");s.appendChild(d),s.appendChild(o),o.appendChild(m),l.appendChild(s),p.value="progressBar-"+i,p.text="progressBar-"+i,r.appendChild(p),animateProgressBar(0,u,d)}for(i=0;i<e.length;i++){var g=document.createElement("BUTTON");g.setAttribute("id","changebar-"+i);var m=document.createTextNode(e[i]);g.appendChild(m),n.appendChild(g)}document.querySelector("body").addEventListener("click",function(e){if("button"===e.target.tagName.toLowerCase()){var t=parseFloat(e.target.innerHTML),r=document.getElementById("selectbr").value,r=r.split("-"),n=document.getElementById("progress"+r[1]),i=parseFloat(document.getElementById("percentLabel"+r[1]).innerHTML.replace("%","")),l=decimalVal(i/100*a),s=decimalVal((parseFloat(l)+t)/a*100);s>0?(document.getElementById("percentLabel"+r[1]).innerHTML=s+"%",s>=100?(n.style.width="100%",n.style.backgroundImage="url('')",n.style.backgroundColor="red"):animateProgressBar(i,s,n)):alert("Progress Bar should be positive in number")}})}function animateProgressBar(e,t,a){function r(){e>=t?clearInterval(i):(e++,a.style.width=e+"%",a.style.backgroundImage="url('images/pbar-ani.gif')",a.style.height="22px")}function n(){e>=t?(e--,a.style.width=e+"%",a.style.backgroundImage="url('images/pbar-ani.gif')",a.style.height="22px"):clearInterval(l)}if(t>e)var i=setInterval(r,15);else var l=setInterval(n,15)}function decimalVal(e){return e.toFixed(2)}!function(){getBarsData()}();